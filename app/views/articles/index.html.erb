<div class="container mt-5">
  <h1 class="text-center">お知らせ一覧</h1>
  <% if flash.notice.present? %>
    <div class="alert alert-success" role="alert">
      <%= flash.notice %>
    </div>
  <% end %>
  <% if current_user.news_posting_auth %>
    <div class="d-flex justify-content-end">
      <%= link_to '新規追加', new_article_path, class: 'btn btn-primary' %>
    </div>
  <% end %>

  <table class="table table-hover article_table text-center">
    <thead>
      <tr>
        <th>タイトル</th>
        <th class="create_th"><%= sort_order "created_at", "公開日" %></th>
        <% if current_user.news_posting_auth %>
          <th class="btn_th"></th>
          <th class="btn_th"></th>
        <% end %>
      </tr>
    </thead>
    <tbody>
    <% @articles.each do |article| %>
      <tr class="article">
        <td><%= link_to article.title, article_path(article) %></td>
        <td><%= article.created_at.to_s(:datetime_jp) %></td>
        <% if current_user.news_posting_auth && article.employee == current_user %>
          <td class="btn_th">
            <%= link_to '編集', edit_article_path(article), class: 'btn btn-secondary' %>
            <%= link_to '削除', article, method: :delete, data: { confirm: "「#{article.title}」を削除します。よろしいですか？" }, class: 'btn btn-danger' %>
          </td>
        <% end %>
      </tr>
    <% end %>
    </tbody>
  </table>
</div>
